<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>CREATE Timelapse Visualization Generator</title>
        <meta name="description" content="Creating Timelapse visualizations seen at the CREATE lab">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="static/css/normalize.css">
        <link rel="stylesheet" href="static/css/upload-style.css">
    </head>
    <body>
    <!-- http://explorables.cmucreatelab.org/data-visualization-tools/examples/createlab-viirs/google-maps.html -->
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div id="jumbotron">
            <ul class=flashes>
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
            </ul>
            </div>
          {% endif %}
        {% endwith %}
        <div class="content-area" id="example-map">
            <iframe src="http://explorables.cmucreatelab.org/data-visualization-tools/examples/createlab-viirs/google-maps.html" frameborder="0"></iframe>
            <div class='title-bar' id='title'><h1><span style="white-space: nowrap;">Timelapse Visualization</span> Generator (pre-beta)</h1></div>
            <div class='title-bar' id='subtitle'><h3>A simple CREATE Lab utility for creating simple and<br>beautiful animated timelapse map visualizations.</h3></div>
        </div>
        
        <div class='content-area' id='how-it-works'>
            <h2>How It Works</h2>
            <div id='diagram'>
                <div class="circle" id="box1">
                    <p>upload your .csv file (comma-separated values)</p>
                </div>
                <div class="circle" id="box2">
                    <p>customize and publish your visualization</p>
                </div>
                <div class="circle" id="box3">
                    <p>download your map project</p>
                </div>
            </div>
        </div>
        <div class="content-area" id="button-area">
            <a href='#upload'><div class='button' id='get-started'>Get Started</div></a>
        </div>
        <div class='content-area' id='upload-area'>
            <a name='upload'></a>
            <h2>Upload Your CSV File</h2>
            <div id='upload-information'>
                <h3>Pre-Beta Disclaimer</h3>
                <p>This utility is currently in early development stages. The utility will produce a zip file containing your project, and a live version of your project. The live version may be altered or removed at any time without notificiation.</p>
                <h3>Instructions</h3>
                To create a map, simply upload a CSV file containing columns for latitude, longitude, and time.
                <p><strong>Download an</strong> <a href="static/example-x-y-time.csv">example CSV file here</a></p>
                <p><strong>Valid file layouts:</strong></p>
                <ul>
                    <li>Lat, Lon, Time</li>
                </ul>
                <p><strong>Latitude</strong> and <strong>longitude</strong> must be specified in WGS84 decimal degrees.</p>
                <p>For best results, <strong>dates / times</strong> should ideally be given in &ldquo;YYYY-MM-DD&rdquo; format,<br>or dates with times in "YYYY-MM-DD HH:MM:SS" format.</p>
                <p>Columns must match the following format:</p>
                <ul>
                    <li><strong>Latitude</strong> first column (no header), or named &ldquo;lat&rdquo; or &ldquo;latitude&rdquo;</li>
                    <li><strong>Longitude</strong> second column (no header), or named &ldquo;lon&rdquo; or &ldquo;longitude&rdquo;</li>
                    <li><strong>Time</strong> third column (no header), or named &ldquo;date&rdquo; or &ldquo;time&rdquo;</li>
                </ul>
                <p>If your CSV file contains headers, set your column names to "lat", "lon", and "time" (no quotation marks).</p>
                <p>Please report errors, issues, or requests to megge [at] andrew.cmu.edu</p>
            </div>
            <div id='upload-form'>
                <form onsubmit="return checkForm(this);" action="create/" method="POST" enctype="multipart/form-data">
                    <fieldset>
                        <legend>Upload CSV File:</legend>
                        <br>
                        <div>
                            <label for="fileselect">Select a file from your computer</label>
                            <br>
                            <input type="file" id="fileselect" name="csv_file" required/>
                            <br>
                        </div>
                        <br>
                        <label for="project_title">Project Title:</label>
                        <input type='text' name='project_title' placeholder="My Project's Title" 
                        onchange="generateProjectID(this.value);" 
                        oninput="generateProjectID(this.value);"
                        required/>
                        <br>
                        <label for="project_id">Project ID:</label>
                        <input type='text' name='project_id' placeholder='my-projects-title' 
                        onchange="validateID(this.value);"
                        oninput="validateID(this.value);" 
                        required/>
                        <p id="example-url"><span style="color: rgb(150,150,150); font-size: 15px">e.g. http://www.create.maps.org/projects/my-projects-title</span></p>
                        <p id="valid-url" class="validate"> valid url</p>
                        <p id="available-url" class="validate"> available</p>
                        <br>
                        <label for="email">Your Email:</label>
                        <input type='email' name='email' placeholder='email@me.com' />
                        <p><span style="color: rgb(150,150,150); font-size: 15px">A valid email is required to modify or delete your project later.</span></p>
                        <br><br>
                        <input type="submit" name='submit' value="Submit"/>
                        <input type="Reset" onclick="resetForm(this.form)" value="Reset"/>

                    </fieldset>
                </form>
                <br>
                <br>
                <div id='status'></div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script>window.jQuery || document.write('<script src="static/js/vendor/jquery-1.12.0.min.js"><\/script>')</script>
        <script src="static/js/upload-js.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <!--  <script>
            // (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            // function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            // e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            // e.src='https://www.google-analytics.com/analytics.js';
            // r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            // ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script> -->
    </body>
</html>
